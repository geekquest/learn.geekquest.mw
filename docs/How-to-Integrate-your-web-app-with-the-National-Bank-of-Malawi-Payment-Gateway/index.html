<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-How-to-Integrate-your-web-app-with-the-National-Bank-of-Malawi-Payment-Gateway">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">How to Integrate your web app with the National Bank of Malawi Payment Gateway. | GeekQuest Learn</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://learn.geekquest.mw/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://learn.geekquest.mw/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://learn.geekquest.mw/docs/How-to-Integrate-your-web-app-with-the-National-Bank-of-Malawi-Payment-Gateway"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="How to Integrate your web app with the National Bank of Malawi Payment Gateway. | GeekQuest Learn"><meta data-rh="true" name="description" content="Date : 2023-11-24"><meta data-rh="true" property="og:description" content="Date : 2023-11-24"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://learn.geekquest.mw/docs/How-to-Integrate-your-web-app-with-the-National-Bank-of-Malawi-Payment-Gateway"><link data-rh="true" rel="alternate" href="https://learn.geekquest.mw/docs/How-to-Integrate-your-web-app-with-the-National-Bank-of-Malawi-Payment-Gateway" hreflang="en"><link data-rh="true" rel="alternate" href="https://learn.geekquest.mw/docs/How-to-Integrate-your-web-app-with-the-National-Bank-of-Malawi-Payment-Gateway" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.94a82016.css">
<link rel="preload" href="/assets/js/runtime~main.2a36e38c.js" as="script">
<link rel="preload" href="/assets/js/main.744ba92e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/geekquest-logo.svg" alt="Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/geekquest-logo.svg" alt="Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">GeekQuest Learn</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Tutorials</a><a class="navbar__item navbar__link" href="/videos">Videos</a><a class="navbar__item navbar__link" href="/docs/malawian-apis">Malawian APIs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/geekquest/learn.geekquest.mw" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Contribute on GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro">Welcome to Geek Quest Learn Member tutorials</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/malawian-apis">Malawian APIs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/How-to-Integrate-your-web-app-with-the-National-Bank-of-Malawi-Payment-Gateway">How to Integrate your web app with the National Bank of Malawi Payment Gateway.</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">How to Integrate your web app with the National Bank of Malawi Payment Gateway.</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>How to Integrate your web app with the National Bank of Malawi Payment Gateway.</h1><h4 class="anchor anchorWithStickyNavbar_LWe7" id="date--2023-11-24">Date : 2023-11-24<a href="#date--2023-11-24" class="hash-link" aria-label="Direct link to Date : 2023-11-24" title="Direct link to Date : 2023-11-24">​</a></h4><p>Author : <a href="https://github.com/mozesi" target="_blank" rel="noopener noreferrer">Moses Msukwa</a></p><p>In this article, I will demonstrate how you can integrate your website with the <strong>National Bank of Malawi (NBM) payment gateway</strong> using the hosted checkout model. The hosted checkout allows a business to collect payments from a customer through an interaction hosted and displayed by the payment Gateway.</p><p>Below is an illustration of the information flow of the hosted checkout session.</p><p> <img loading="lazy" alt="hosted checkout" src="/assets/images/hosted-eeab2783e5640fb4b010a2011fa1786b.png" width="846" height="429" class="img_ev3q"></p><ol><li><p>The payer initiates the payment process for goods and services at your shop site.</p></li><li><p>The payer enters the required information, and clicks &quot;Pay&quot;.</p></li><li><p>If the payment is successful, the payer can obtain the payment details from one of these sources: the Payment Gateway-hosted receipt or your shop site.</p></li></ol><p>For simplicity, we will simulate a simple case where a payer wants to pay a merchant. For this, We will need two pages. The first page will be an interface to allow a payer to enter the amount to be paid and the currency for the payment. The second page will handle the actual request of the checkout session upon which the payer will be presented with the payment interface from the gateway.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-create-a-folder-and-the-files-for-the-project">1. Create a folder and the files for the project.<a href="#1-create-a-folder-and-the-files-for-the-project" class="hash-link" aria-label="Direct link to 1. Create a folder and the files for the project." title="Direct link to 1. Create a folder and the files for the project.">​</a></h2><p>In your web server, create a directory and name it <strong>NBAPI</strong>. We will need two files for this use case. We will need an <strong>index.php</strong> file that will provide an interface to allow a user to enter the desired amount they want to pay.</p><p>In the second file <strong>requestSession.php</strong>, we will request the checkout session and make the actual payment. In the <strong>NBAPI</strong> directory, create the two files namely <strong>index.php</strong> and <strong>requestSession.php</strong>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-create-a-form-for-making-a-payment">2. Create a form for making a payment.<a href="#2-create-a-form-for-making-a-payment" class="hash-link" aria-label="Direct link to 2. Create a form for making a payment." title="Direct link to 2. Create a form for making a payment.">​</a></h2><p>In <strong>index.php</strong>, create a form with two input fields. An input field of the type number for inputing the payable amount and a select field for choosing the desired currency. Below is the code.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;html lang=&quot;en&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;head&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;title&gt;payment&lt;/title&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;link rel=&quot;canonical&quot; href=&quot;https://getbootstrap.com/docs/5.1/examples/navbar-fixed/&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;link href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot; integrity=&quot;sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We&quot; crossorigin=&quot;anonymous&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;meta name=&quot;theme-color&quot; content=&quot;#7952b3&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;link href=&quot;navbar-top-fixed.css&quot; rel=&quot;stylesheet&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/head&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;body&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;nav class=&quot;navbar navbar-expand-md fixed-top&quot;  style=&quot;background-color:#1e3d11;&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div class=&quot;container-fluid&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;a class=&quot;navbar-brand&quot; href=&quot;index.php&quot; style=&quot;color:white&quot;&gt;Donate&lt;/a&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;button class=&quot;navbar-toggler&quot; type=&quot;button&quot; data-bs-toggle=&quot;collapse&quot; data-bs-target=&quot;#navbarCollapse&quot; aria-controls=&quot;navbarCollapse&quot; aria-expanded=&quot;false&quot; aria-label=&quot;Toggle navigation&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;span class=&quot;navbar-toggler-icon&quot;&gt;&lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;div class=&quot;collapse navbar-collapse&quot; id=&quot;navbarCollapse&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;ul class=&quot;navbar-nav me-auto mb-2 mb-md-0&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;li class=&quot;nav-item&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;a class=&quot;nav-link active&quot; aria-current=&quot;page&quot; href=&quot;index.php&quot; style=&quot;color:white&quot;&gt;&lt;b&gt;Pay&lt;/b&gt;&lt;/a&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/li&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/ul&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/nav&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &lt;br&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &lt;main class=&quot;container&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div class=&quot;bg-light p-5 rounded&quot;&gt;                      </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;form class=&quot;col-md-4&quot; action=&quot;requestSession.php&quot; method=&quot;POST&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div  class=&quot;row mb-3&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;label for=&quot;currency&quot; class=&quot;form-label&quot;&gt;Select Currency&lt;/label&gt;&lt;br&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;select type=&quot;text&quot; id=&quot;curreny&quot; class=&quot;form-select&quot; name=&quot;currency&quot;required&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;option value=&quot;USD&quot;&gt;USD&lt;/option&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &lt;option selected value=&quot;MWK&quot;&gt;MWK&lt;/option&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;/select&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div  class=&quot;row mb-4&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;label for=&quot;amount&quot; class=&quot;form-label&quot;&gt;Enter Amount&lt;/label&gt;&lt;br&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &lt;input type=&quot;number&quot; class=&quot;form-control&quot; id=&quot;amount&quot; name=&quot;amount&quot;  min=&quot;5&quot; required&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/div&gt;             </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div class=&quot;col-12&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &lt;button class=&quot;btn btn-lg btn-primary&quot; type=&quot;submit&quot; role=&quot;button&quot;&gt;Donate Now &amp;raquo;&lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/form&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/main&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js&quot; integrity=&quot;sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/html&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="3-the-result-and-success-indicators">3. The result and success indicators<a href="#3-the-result-and-success-indicators" class="hash-link" aria-label="Direct link to 3. The result and success indicators" title="Direct link to 3. The result and success indicators">​</a></h2><p>We need to retrieve the result indicator and success indicators. The result indicator will automatically be returned by the gateway via the <strong>return URL</strong> which we will define in <strong>step 5</strong>. Upon requesting the checkout session, the gateway will return the success indicator which we will store through a session variable. (Note that this can be stored in your system database.)</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">session_start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$resultIndicator  = $_GET[&quot;resultIndicator&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$successIndicator = $_SESSION[&quot;successIndicator&quot;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">?&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>A match of the <strong>$successIndicator</strong> and the <strong>$resultIndicator</strong> indicates that the payment was successful.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       if(isset($resultIndicator)&amp; isset($successIndicator))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          if($resultIndicator == $successIndicator){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              echo &quot;The payment was succesfull&quot;;           </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      }    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">?&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="requesting-the-hosted-checkout-interaction">Requesting the hosted checkout interaction<a href="#requesting-the-hosted-checkout-interaction" class="hash-link" aria-label="Direct link to Requesting the hosted checkout interaction" title="Direct link to Requesting the hosted checkout interaction">​</a></h2><p>In <strong>requestSession.php</strong> we need to request the checkout session using the Create Checkout Session operation. The request should include the payment, interaction data and the completion instructions.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="4-define-and-initiate-the-payment-and-interaction-data">4. Define and initiate the payment and interaction data.<a href="#4-define-and-initiate-the-payment-and-interaction-data" class="hash-link" aria-label="Direct link to 4. Define and initiate the payment and interaction data." title="Direct link to 4. Define and initiate the payment and interaction data.">​</a></h2><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;?php</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">session_start();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if( $_POST[&quot;currency&quot;] || $_POST[&quot;amount&quot;] ) {   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$amount = $_POST[&#x27;amount&#x27;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$currency = $_POST[&#x27;currency&#x27;];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$reference = uniqid();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$orderId   = uniqid();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$apiUsername =&quot;apiUsername&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$merchant =&quot;MerchatId&quot;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="5-define-the-interactionreturnurl">5. Define the interaction.returnUrl.<a href="#5-define-the-interactionreturnurl" class="hash-link" aria-label="Direct link to 5. Define the interaction.returnUrl." title="Direct link to 5. Define the interaction.returnUrl.">​</a></h2><p>As pre-empted in <strong>step 3</strong>, the gateway will need the <strong>$returnUrl</strong> to redirect the payer after the checkout session. Possibly, when redirected the payer can be  presented with the payment status or any desired message including a receipt.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$returnUrl = &quot;https://returnurl.com&quot;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="6-your-api-password">6. Your API Password<a href="#6-your-api-password" class="hash-link" aria-label="Direct link to 6. Your API Password" title="Direct link to 6. Your API Password">​</a></h2><p>You should generate the API password in the Merchant Administration Portal. Administrator login credentials are provided to you by NBM when you are successfully on boarded on the gateway as a merchant. As an administrator, you will need to create a new operator with permissions to generate the API password.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$apiPassword =&quot;yourMerchantPortalGeneratedApiPassword&quot;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="7--the-base-url-for-requesting-the-checkout-session">7.  The base url for requesting the checkout session.<a href="#7--the-base-url-for-requesting-the-checkout-session" class="hash-link" aria-label="Direct link to 7.  The base url for requesting the checkout session." title="Direct link to 7.  The base url for requesting the checkout session.">​</a></h2><p>You will be provided with the base url for the test environment for testing purposes. You will then switch to a production base url.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$baseUrl =  &quot;https://nbm.gateway.mastercard.com/api/nvp/version/49&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Then we need to Initiate a curl with the Create Checkout Session operation. As ealier indicated, this request should include the payment and the interaction data, plus the completion instructions. we have already defined the needed parameters from <strong>step 4</strong>.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ch = curl_init();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl_setopt($ch, CURLOPT_URL,$baseUrl);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl_setopt($ch, CURLOPT_POST,1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl_setopt($ch, CURLOPT_POSTFIELDS,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&quot;apiOperation=&quot;.$apiOperation.&quot;&amp;apiPassword=&quot;.$apiPassword.&quot;&amp;transaction.reference=&quot;.$reference.&quot;&amp;interaction.returnUrl=&quot;.$returnUrl.&quot;&amp;apiUsername=&quot;.$apiUsername.&quot;&amp;merchant=&quot;.$merchant.&quot;&amp;order.id=&quot;.$orderId.&quot;&amp;order.amount=&quot;.$amount.&quot;&amp;order.currency=&quot;.$currency);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$headers = array();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$headers[] = &#x27;Content-Type: application/x-www-form-urlencoded&#x27;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$result = curl_exec($ch);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if(curl_errno($ch)){</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    echo &#x27;ERROR:&#x27;.curl_error($ch);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">curl_close($ch);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="7-extracting-the-sessionid-and-the-success-indicator-from-the-curl-result">7. Extracting the session.id and the success indicator from the curl result.<a href="#7-extracting-the-sessionid-and-the-success-indicator-from-the-curl-result" class="hash-link" aria-label="Direct link to 7. Extracting the session.id and the success indicator from the curl result." title="Direct link to 7. Extracting the session.id and the success indicator from the curl result.">​</a></h2><p>A successful response in <strong>step 7</strong> will contain the session.id and the success Indicator parameters.
the result indicator and success indicators</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$sessionid = explode(&quot;=&quot;,explode(&quot;&amp;&quot;,$result)[2])[1];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$successIndicator = explode(&quot;=&quot;,explode(&quot;&amp;&quot;,$result)[5])[1];</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You may be wondering why the success Indicator.</p><p>The gateway sends the result of the payment in a <strong>resultIndicator</strong> parameter, via the return url (interaction.returnUrl) used to return the payer to your desired page. You can determine the success of the payment by comparing the values of <strong>resultIndicator</strong> and the <strong>successIndicator</strong>.</p><p>A match of the <strong>successIndicator</strong> and the <strong>resultIndicator</strong> shows that the payment was successful. Depending on you system use case, you can then save the value returned in the successIndicator parameter on your system to verify the success or failure of the payment. </p><p>Here We will use sessions just to demonstrate the point as explained.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$_SESSION[&quot;successIndicator&quot;] = $successIndicator;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$_SESSION[&quot;amount&quot;] = $amount ;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$_SESSION[&quot;currency&quot;] = $currency;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Include the below code for the page structure and the payment request form.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;!doctype html&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;html lang=&quot;en&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;head&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;meta charset=&quot;utf-8&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;meta name=&quot;description&quot; content=&quot;&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;title&gt;your name&lt;/title&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;link rel=&quot;canonical&quot; href=&quot;https://getbootstrap.com/docs/5.1/examples/navbar-fixed/&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;link href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css&quot; rel=&quot;stylesheet&quot; integrity=&quot;sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We&quot; crossorigin=&quot;anonymous&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;link href=&quot;navbar-top-fixed.css&quot; rel=&quot;stylesheet&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/head&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;body&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;nav class=&quot;navbar navbar-expand-md fixed-top&quot;  style=&quot;background-color:#1e3d11;&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;div class=&quot;container-fluid&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;a class=&quot;navbar-brand&quot; href=&quot;#&quot; style=&quot;color:white&quot;&gt;Your site&lt;/a&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;button class=&quot;navbar-toggler&quot; type=&quot;button&quot; data-bs-toggle=&quot;collapse&quot; data-bs-target=&quot;#navbarCollapse&quot; aria-controls=&quot;navbarCollapse&quot; aria-expanded=&quot;false&quot; aria-label=&quot;Toggle navigation&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;span class=&quot;navbar-toggler-icon&quot;&gt;&lt;/span&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/button&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;div class=&quot;collapse navbar-collapse&quot; id=&quot;navbarCollapse&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;ul class=&quot;navbar-nav me-auto mb-2 mb-md-0&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;li class=&quot;nav-item&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              &lt;a class=&quot;nav-link active&quot; aria-current=&quot;page&quot; href=&quot;#&quot; style=&quot;color:white&quot;&gt;&lt;b&gt;Your site&lt;/b&gt;&lt;/a&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/li&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          &lt;/ul&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/nav&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &lt;br&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   &lt;main class=&quot;container&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div class=&quot;bg-light p-5 rounded&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;p class=&quot;lead&quot;&gt;Make your payment.&lt;/p&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;div class=&quot;form-group&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;div class=&quot;col-xs-8&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;label for=&quot;amount&quot;&gt;Confirm a payment of &lt;?php echo $currency.$amount;?&gt;. &lt;/label&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;br&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;br&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;input type=&quot;button&quot; maxlength=&quot;5&quot; maxheight=&quot;2&quot; class=&quot;btn btn-primary btn-lg&quot; value=&quot;Pay&quot; onclick=&quot;Checkout.showPaymentPage();&quot; /&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/div&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/main&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We then need to reference the <strong>checkout.js</strong> file from the gateway servers. This will place the Checkout object into global scope. In this case we will use <strong>version 49</strong> of the checkout.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;script src=&quot;https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js&quot;&gt;&lt;/script&gt; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;script src=&quot;https://nbm.gateway.mastercard.com/checkout/version/49/checkout.js&quot; data-error=&quot;errorCallback&quot; data-cancel=&quot;cancelCallback&quot;&gt;&lt;/script&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>We need some JavaScript to finalize the process. we need a call to the Checkout.configure() function and then pass in a JSON object that includes the returned session.id and other payment request parameters to pass in the necessary data for the payment.</p><div class="language-php codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-php codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;script type=&quot;text/javascript&quot;&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            function errorCallback(error) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  console.log(JSON.stringify(error));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            function cancelCallback() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  console.log(&#x27;Payment cancelled&#x27;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Checkout.configure({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                merchant: &#x27;MECHARNTID&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                order: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    id: &#x27;&lt;?php echo $orderId;  ?&gt;&#x27; ,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    amount: &#x27;&lt;?php echo $amount;  ?&gt;&#x27; ,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    currency: &#x27;&lt;?php echo $currency;  ?&gt;&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    description: &#x27;description&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                session:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    id:&#x27;&lt;?php echo $sessionid; ?&gt;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 interaction:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    merchant: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        name: &#x27;NAME &#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        address: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            line1: &#x27;YOUR ADDRESS&#x27;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            line2: &#x27;YOUR POST BOX&#x27;            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            });</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &lt;/script&gt;   </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js&quot; integrity=&quot;sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj&quot; crossorigin=&quot;anonymous&quot;&gt;&lt;/script&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/html&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>There we go! we have the simple integration to the payment gateway.</p><p>You can get more details on how to access the payment API from <a href="https://www.natbank.co.mw/" target="_blank" rel="noopener noreferrer">National Bank of Malawi </a> and  more information on the API <a href="https://test-nbm.mtf.gateway.mastercard.com/api/documentation/integrationGuidelines/index.html?locale=en_US" target="_blank" rel="noopener noreferrer">here</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/How-to-Integrate-your-web-app-with-the-National-Bank-of-Malawi-Payment-Gateway.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/malawian-apis"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Malawian APIs</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-create-a-folder-and-the-files-for-the-project" class="table-of-contents__link toc-highlight">1. Create a folder and the files for the project.</a></li><li><a href="#2-create-a-form-for-making-a-payment" class="table-of-contents__link toc-highlight">2. Create a form for making a payment.</a></li><li><a href="#3-the-result-and-success-indicators" class="table-of-contents__link toc-highlight">3. The result and success indicators</a></li><li><a href="#requesting-the-hosted-checkout-interaction" class="table-of-contents__link toc-highlight">Requesting the hosted checkout interaction</a></li><li><a href="#4-define-and-initiate-the-payment-and-interaction-data" class="table-of-contents__link toc-highlight">4. Define and initiate the payment and interaction data.</a></li><li><a href="#5-define-the-interactionreturnurl" class="table-of-contents__link toc-highlight">5. Define the interaction.returnUrl.</a></li><li><a href="#6-your-api-password" class="table-of-contents__link toc-highlight">6. Your API Password</a></li><li><a href="#7--the-base-url-for-requesting-the-checkout-session" class="table-of-contents__link toc-highlight">7.  The base url for requesting the checkout session.</a></li><li><a href="#7-extracting-the-sessionid-and-the-success-indicator-from-the-curl-result" class="table-of-contents__link toc-highlight">7. Extracting the session.id and the success indicator from the curl result.</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorials</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="#nolink" class="footer__link-item">We are only on WhatsApp at the moment</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/geekuest" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Org<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Geek Quest MW. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.2a36e38c.js"></script>
<script src="/assets/js/main.744ba92e.js"></script>
</body>
</html>